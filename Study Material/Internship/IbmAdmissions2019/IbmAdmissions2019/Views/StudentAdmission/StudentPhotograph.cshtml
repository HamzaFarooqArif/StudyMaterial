
@{
    ViewBag.Title = "StudentPhotograph";
}


@{
    bool flag = false;
    String msg = "";
    if (ViewBag.PicMessage != null)
    {
        msg = (String)ViewBag.PicMessage;
        flag = true;
    }
}


@if (flag)
{
    <div class="alert alert-danger" id="errMsg" role="alert">
        @ViewBag.PicMessage
    </div>
}
else
{
  
        <div class="alert alert-danger d-none" id="errMsg" role="alert">
             
        </div>
  
}
@using (Html.BeginForm("StudentPhotograph", "StudentAdmission", FormMethod.Post,
                            new { enctype = "multipart/form-data" }))
{

    <div class="row">
        <div class="col-md-4" style="height:300px">
            <img id="stdImg" width="270" height="300" src="@IbmAdmissions2019.Utilities.StudentUtility.getInstance().getImagePath(User.Identity.Name)" />
        </div>
        <div class="col-md-2"></div>
        <div class="col-md-6">
            <br />
            <br />
            <h4>Instructions</h4>
            <ul>
                <li>
                    Upload passport size photograph
                </li>
                <li>
                    Maximum allowed file size is 1MB.
                </li>
                <li>
                    This photograph will be used as photo identity in test center
                </li>
            </ul>

        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <label for="file">Upload Image</label>
            <input type="file" id="file" class="form-control-file" name="file" onchange="readURL(this)" accept="image/gif, image/jpeg, image/png" />
        </div>

    </div>
    <div class="row d-flex justify-content-right">
        <input type="submit" class="btn btn-primary" value="Upload" />
    </div>




}
<script>
    function readURL(input) {

        if (input.files && input.files[0]) {

            var size = input.files[0].size;

            if (size > 1024000) {
                $("#file").val("");
                $("#errMsg").html("Maximum file size exceeds. Maximum allowed file size is 1MB.");
                $("#errMsg").removeClass("d-none");
                return;
            }
            else {
                var reader = new FileReader();
                $("#errMsg").addClass("d-none");
                reader.onload = function (e) {
                    $('#stdImg')
                        .attr('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }
    }
</script>